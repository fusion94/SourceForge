<?php
//
// SourceForge: Breaking Down the Barriers to Open Source Development
// Copyright 1999-2000 (c) The SourceForge Crew
// http://sourceforge.net
//
// $Id: portals,v 1.8 2000/06/16 08:20:52 tperdue Exp $

require ('pre.php');    

$expl_pathinfo = explode('/',$REQUEST_URI);

//portal name wasn't passed in the URL

if (!$expl_pathinfo[2]) {
	//redirect to a portal directory
	exit_no_group();
}

//get the group_id based on the group_name in the URL

$res_grp=group_get_result_by_unix($expl_pathinfo[2]);

//group was not found

if (db_numrows($res_grp) < 1) {

	exit_error("Invalid Portal","That portal does not exist.");

} else {

	//set up the group_id
	$group_id=db_result($res_grp,0,'group_id');

	if (db_result($res_grp,0,'type') != 2) {
		//not a portal - show error
		exit_error('Error','The id you provided is not a valid portal id');
	}

	if ($expl_pathinfo[3]) {
		//third subdirectory - must be admin page
		include ('portal_admin.php');
	} else {
		//show the portal summary page
		include ('portal_home.php');
	}
}

?>
